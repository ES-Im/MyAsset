| 속성 | 설명 |
|----|----|
|    |    |

# 도메인 모델
***

## 사용자(user)

---
### _Entity : user_
 
- 내부관리용 회원관련 비개인정보 엔티티 
####  Attribute

| 속성            | 설명         |
|---------------|------------|
| userKey        | 사용자의 내부식별자 |
| status        | 사용자 상태     | 
| role          | 관리자여부      | 
| creatAt       | 가입일자       | 
| lastLoginAt   | 마지막 로그인 일자 | 
| withdrawReqAt | 탈퇴요청일      |  

    ※ Enum : status
      · ACTIVE : 활성계정
      · WITHDRAWN : 탈퇴
      · WITHDRAW_PENDING : 탈퇴요청
      · DORMANT : 휴먼계정
    
    ※ Enum : role
      · ADMIN : 관리자
      · USER : 일반 사용자

### 행위
    - constructor(): 회원등록 (status=ACTIVE, role=USER)
    - register() : 회원등록
    - requestWithdraw(): 사용자의 회원탈퇴요청 
    - requestActive() : 사용자의 계정복구요청
    - markDormant() : 휴먼계정전환
    - markWithdraw() : 탈퇴계정전환
    - validateDelete() : USER 물리적 삭제 가능 여부 판단
    - isActive() : 활설 계정 체크

### 정책 (Batch / Scheduler)
    - markDormant: 휴먼상태변경 
    - markWithdrawn: 회원탈퇴 상태 전환 
    - deleteUser: USER 정보 물리적 삭제 

### 규칙
    ① status 변환시점
      · ACTIVE : 소셜 회원가입 즉시
      · ACTIVE → DORMANT : 1년간 미접속
      · ACTIVE → WITHDRAW_PENDING : 사용자 탈퇴요청
      · WITHDRAW_PENDING / DORMANT → ACTIVE : 소셜로그인 && 사용자 동의
      · WITHDRAW_PENDING → WITHDRAWN : 사용자 탈퇴요청 후 30일 경과
      · WITHDRAW → 물리삭제 : 탈퇴 확정 후 60일 경과

    ② 회원탈퇴 
      · 사용자는 ACTIVE상태에서 회원을 탈퇴(요청)할 수 있다.
      · WITHDRAWN 상태전환 후 60일이 지나면 해당 유저에 대한 정보(E.user) 전부 물리적으로 삭제된다.
    
    ③ 계정복구
      · 사용자가 계정복구를 요청하면 즉시 Active 상태가 된다
      · WITHDRAW_PENDING 상태에서 계정을 복구하면 '탈퇴요청일자'가 Null값이 된다. 

     

### _Entity : user_info_

- OAuth로 불러온 회원관련 개인정보 엔티티
#### Attribute
| 속성           | 설명                    |
|--------------|-----------------------|
| userKey       | 사용자의 내부식별자            |
| name         | 사용자 이름 (소셜서버에서 받은 값)  |
| email        | 사용자 이메일 (소셜서버에서 받은 값) |
| providerType | OAuth 서비스 Provider    |

    ※ Enum : providerType
      · KAKAO
      · GOOGLE
      · NAVER

### 행위
    - constructor(): 회원정보 저장
    - registerFromOAuth() : 회원 정보 등록

### 정책 (Batch / Scheduler)
    - deleteUserInfo: 회원의 개인정보 물리적으로 삭제 

### 도메인간 관계 정의
    - USER (1) --- (0..1) USER_INFO
    - User는 Aggregate Root이며, UserInfo는 User의 생명주기에 종속된다.
    User가 WITHDRAWN 상태로 전환되면 해당 User의 개인정보(UserInfo)는 정책에 따라 일정 시간이 지난 후 제거된다.

    ※ user과 userInfo 생명주기  - 삭제예정 문구 (개인 참고용)
    - 생성 : OAuthUserInfo(불변 DTO) → userInfo 생성 → user 생성
    - 소멸 : user WITHDRAWN 전환 → userInfo 소멸 -(60일뒤)→ user 소멸 



---

## 자산 (Asset)
    - 사용자가 보유한 자산종목
**Entity: AssetType**

### 은행계좌(bankAccount)
**entity**

### 현금(cash)
**entity**

### 증권계좌(SecuritiesAccount)
**entity**

## 거래내역(transaction)
**entity**

### 예산(budget)
**entity*

### 카테고리(category)
**entity**

### 보유주식종목(Holding)
**entity**

### 주식종목뉴스(news)
**entity**

### 알림(alarm)
**entity**

### 자산 포트폴리오(asset portfolio)

### 로그(log)